#include "Eagle.h"

#include "./unit_tests/test_memory.c"
#include "./unit_tests/test_cpu.c"
#include "./unit_tests/test_clock.c"
#include "./unit_tests/test_lda.c"

int main()
{
    EAGLE_INIT();

    // === Memory Collection ===
    ADD_TEST(MEMORY_COLLECTION, T_MEMORY_CREATE);
    ADD_TEST(MEMORY_COLLECTION, T_MEMORY_FREE);
    ADD_TEST(MEMORY_COLLECTION, T_MEMORY_READ_WRITE);
    ADD_TEST(MEMORY_COLLECTION, T_MEMORY_BOUNDS_LOWER);
    ADD_TEST(MEMORY_COLLECTION, T_MEMORY_BOUNDS_UPPER);

    // === Clock Collection ===
    ADD_TEST(CLOCK_COLLECTION, T_CLOCK_CREATE);
    ADD_TEST(CLOCK_COLLECTION, T_CLOCK_FREE);

    // === CPU Collection ===
    ADD_TEST(CPU_COLLECTION, T_CPU_CREATE);
    ADD_TEST(CPU_COLLECTION, T_CPU_FREE_ONLY);
    ADD_TEST(CPU_COLLECTION, T_CPU_FREE_WITH_MEMORY_AND_CLOCK);
    ADD_TEST(CPU_COLLECTION, T_CPU_FETCH_BYTE);
    ADD_TEST(CPU_COLLECTION, T_CPU_FETCH_WORD);
    ADD_TEST(CPU_COLLECTION, T_CPU_READ_BYTE);
    ADD_TEST(CPU_COLLECTION, T_CPU_READ_WORD);
    ADD_TEST(CPU_COLLECTION, T_CPU_WRITE_BYTE);
    ADD_TEST(CPU_COLLECTION, T_CPU_SET_AND_READ_STATUS_REG);
    ADD_TEST(CPU_COLLECTION, T_CPU_SET_AND_READ_FLAGS);

    // === LDA Collection ===
    ADD_TEST(LDA_COLLECTION, T_LDA_IM);

    // === RUN ===
    RUN_COLLECTION(CLOCK_COLLECTION);
    RUN_COLLECTION(CPU_COLLECTION);
    RUN_COLLECTION(LDA_COLLECTION);

    EAGLE_END();
}